<!-- fragments/productoPreview.html -->
<div th:fragment="productoPreviewFragment">
  <div class="preview-container">
    <!-- Card estilo menú de restaurante -->
    <div class="card border-0 shadow-sm h-100">
      <div class="position-relative">
        <img id="previewImagen"
             th:src="${producto.imagenUrl != null ? producto.imagenUrl : ''}"
             alt="Vista previa del producto" 
             class="card-img-top"
             style="height: 250px; object-fit: cover; background-color: #e9ecef;"
             onerror="this.style.backgroundColor='#e9ecef'; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'400\' height=\'300\'%3E%3Crect width=\'400\' height=\'300\' fill=\'%23e9ecef\'/%3E%3Ctext x=\'50%25\' y=\'50%25\' dominant-baseline=\'middle\' text-anchor=\'middle\' font-family=\'Arial, sans-serif\' font-size=\'20\' fill=\'%236c757d\'%3ESin Imagen%3C/text%3E%3C/svg%3E';">
        
        <!-- Badge de disponibilidad sobre la imagen -->
        <span id="previewDisponibilidad" 
              class="badge position-absolute top-0 end-0 m-3 fs-6 disponible-badge"
              th:classappend="${producto.estado != null && producto.estado ? 'disponible-badge' : 'no-disponible-badge'}"
              th:text="${producto.estado != null && producto.estado ? 'Disponible' : 'No Disponible'}">
          <i class="bi bi-check-circle-fill"></i> Disponible
        </span>
      </div>
      
      <div class="card-body">
        <!-- Categoría -->
        <div class="mb-2">
          <span id="previewCategoria" class="badge categoria-badge"
                th:text="${producto.nombreCategoria != null ? producto.nombreCategoria : 'Categoría'}">
            <i class="bi bi-bookmark-fill"></i> Categoría
          </span>
        </div>
        
        <!-- Nombre del producto -->
        <h4 id="previewNombre" class="card-title fw-bold mb-3"
            th:text="${producto.nombre != null ? producto.nombre : 'Nombre del Producto'}">
          Nombre del Producto
        </h4>
        
        <!-- Descripción -->
        <p id="previewDescripcion" class="card-text text-muted"
           style="min-height: 60px; font-size: 0.95rem;"
           th:text="${producto.descripcion != null ? producto.descripcion : 'Descripción breve del producto...'}">
          Descripción breve del producto...
        </p>
        
        <!-- Precio destacado -->
        <div class="d-flex justify-content-between align-items-center mt-3 pt-3 border-top">
          <span id="previewPrecio" class="fs-3 fw-bold text-success"
                th:text="${producto.precio != null ? 'S/ ' + producto.precio : 'S/ 0.00'}">
            S/ 0.00
          </span>
          <button class="btn btn-success btn-lg" type="button" disabled>
            <i class="bi bi-cart-plus"></i> Agregar
          </button>
        </div>
      </div>
    </div>
    
    <!-- Información adicional -->
    <div class="card border-0 bg-light mt-3">
      <div class="card-body">
        <h6 class="fw-bold mb-3">
          <i class="bi bi-info-circle text-info"></i> Información del Producto
        </h6>
        <div class="row g-2">
          <div class="col-6">
            <small class="text-muted d-block">Stock</small>
            <span id="previewStock" class="fw-bold" th:text="${producto.stock != null ? producto.stock + ' unidades' : '0 unidades'}">
              0 unidades
            </span>
          </div>
          <div class="col-6">
            <small class="text-muted d-block">Precio</small>
            <span id="previewPrecioDetalle" class="fw-bold" th:text="${producto.precio != null ? 'S/ ' + producto.precio : 'S/ 0.00'}">
              S/ 0.00
            </span>
          </div>
          <div class="col-12 mt-2">
            <small class="text-muted d-block">Categoría</small>
            <span id="previewCategoriaDetalle" class="fw-bold" th:text="${producto.nombreCategoria != null ? producto.nombreCategoria : 'Sin categoría'}">
              Sin categoría
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.preview-container {
  animation: fadeIn 0.3s;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.disponible-badge {
  background-color: #198754 !important;
}

.no-disponible-badge {
  background-color: #6c757d !important;
}

.categoria-badge {
  background-color: #0dcaf0 !important;
  color: #000 !important;
  font-size: 0.85rem !important;
  padding: 0.5rem 0.75rem !important;
}

#previewPrecio {
  color: #198754;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

.card-img-top {
  transition: transform 0.3s;
}

.card:hover .card-img-top {
  transform: scale(1.05);
}

.card {
  transition: all 0.3s;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 1rem 2rem rgba(0,0,0,0.15) !important;
}
</style>
